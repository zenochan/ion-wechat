{"version":3,"file":"bgm.js","sourceRoot":"","sources":["../../../../src/components/bgm/bgm.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,SAAS,EAAE,UAAU,EAAE,KAAK,EAAU,SAAS,EAAC,MAAM,eAAe,CAAC;;IAqG5E;uBARU,IAAI;mBAGA,gGAAgG;mBAGhG,wFAAwF;KAErF;IAEjB,+BAAQ,GAAR;QAEE,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAiC,CAAC;QAC5D,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,QAAQ,CAAC,gBAAgB,CAAC,qBAAqB,EAAE;YAC/C,KAAK,CAAC,IAAI,EAAE,CAAC;SACd,EAAE,KAAK,CAAC,CAAC;QACV,QAAQ,CAAC,gBAAgB,CAAC,oBAAoB,EAAE;YAC9C,KAAK,CAAC,IAAI,EAAE,CAAC;SACd,EAAE,KAAK,CAAC,CAAC;KACX;IAED,4BAAK,GAAL;QAEE,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;KACpB;IAED,2BAAI,GAAJ;QAEE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;KACnB;;gBA3HF,SAAS,SAAC;oBACT,QAAQ,EAAE,KAAK;;oBAEf,MAAM,EAAE;wBACJ,0xCAiED;qBAEF;oBACD,QAAQ,EAAE,ycAWT;iBACF;;;;;6BAGE,SAAS,SAAC,OAAO;wBAMjB,KAAK;wBAGL,KAAK;;uBAlGR;;SAuFa,YAAY","sourcesContent":["import {Component, ElementRef, Input, OnInit, ViewChild} from '@angular/core';\n\n@Component({\n  selector: 'bgm',\n  // templateUrl: 'bgm.html',\n  styles: [\n      `\n      .icon-music-outer {\n        display: inline-block;\n        width: 25px;\n        height: 25px;\n        position: fixed;\n        right: 5px;\n        top: 10px;\n        font-size: 25px;\n        color: #ffda51;\n        z-index: 999;\n        border-radius: 16px;\n        /*border: solid #ffda51 2px;*/\n      }\n\n      .icon-music-outer img {\n        width: 100%;\n        height: 100%;\n      }\n\n      .forbid {\n        display: inline-block;\n        font-size: 25px;\n        width: 25px;\n        height: 25px;\n      }\n\n      .icon-forbidMusic {\n        display: inline-block;\n        font-size: 25px;\n        width: 25px;\n        height: 25px;\n        color: #d0f2fc;\n      }\n\n      audio {\n        position: absolute;\n        left: -300px;\n      }\n\n      .activeMusic {\n        transform: rotate(0);\n        -webkit-animation: musicMove 2s infinite linear;\n        animation: musicMove 2s infinite linear;\n      }\n\n      @-webkit-keyframes musicMove {\n        0% {\n          transform: rotate(0);\n        }\n\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n\n      @keyframes musicMove {\n        0% {\n          transform: rotate(0);\n        }\n\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n    `\n\n  ],\n  template: `\n    <i class=\"icon-music-outer\" id=\"outer\">\n      <i class=\"forbid icon-music\" (click)=\"pause()\" *ngIf=\"playing\">\n        <img class=\"music activeMusic\" [src]=\"img\"/>\n      </i>\n      <i class=\"forbid icon-forbidMusic\" (click)=\"play()\" *ngIf=\"!playing\">\n        <img class=\"music\" [src]=\"img\"/>\n      </i>\n\n      <audio #audio loop autoplay=\"autoplay\" controls id=\"bgMusic\" [src]=\"src\" hidden></audio>\n    </i>\n  `\n})\nexport class BgmComponent implements OnInit\n{\n  @ViewChild('audio')\n  audioRef: ElementRef;\n\n  audio: HTMLAudioElement;\n  playing = true;\n\n  @Input()\n  img: string = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2518206345,2615006369&fm=26&gp=0.jpg';\n\n  @Input()\n  src: string = 'http://old.haolingsheng.com/download/ring/000/100/cdadeab9561132c5028f11ede6026bdd.mp3';\n\n  constructor() { }\n\n  ngOnInit(): void\n  {\n    let audio = this.audioRef.nativeElement as HTMLAudioElement;\n    this.audio = audio;\n    document.addEventListener(\"WeixinJSBridgeReady\", function () {\n      audio.play();\n    }, false);\n    document.addEventListener('YixinJSBridgeReady', function () {\n      audio.play();\n    }, false);\n  }\n\n  pause()\n  {\n    this.playing = false;\n    this.audio.pause();\n  }\n\n  play()\n  {\n    this.playing = true;\n    this.audio.play();\n  }\n}\n"]}
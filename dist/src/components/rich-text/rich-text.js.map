{"version":3,"file":"rich-text.js","sourceRoot":"","sources":["../../../../src/components/rich-text/rich-text.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,SAAS,EAAE,KAAK,EAAC,MAAM,eAAe,CAAC;AAC/C,OAAO,EAAC,MAAM,EAAC,MAAM,wBAAwB,CAAC;;;;;;IA6C5C;qBApBgB,EAAE;KAsBjB;0BAjBG,kCAAG;;YAEL,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;;aAGpB,UAAQ,IAAY;YAApB,iBAQC;YANC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YAClB,IAAI,CAAC,OAAO,CAAC,6BAA6B,EAAE,UAAC,CAAC,EAAE,GAAG;gBACjD,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACvB,MAAM,CAAC,CAAC,CAAA;aACT,CAAC,CAAC;SACJ;;;;IAMD,iCAAK,GAAL,UAAM,MAAM;QAEV,IAAI,MAAM,GAAG,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,UAAU,CAAC;QAChD,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,KAAK,CAAC,CAAC,CAAC;YAC1C,MAAM,CAAA;SACP;QAED,IAAI,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;QACrB,IAAI,CAAC;YAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;SAAC;QAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;YAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAA;SAAE;KACxF;;gBAnDF,SAAS,SAAC;oBACT,QAAQ,EAAE,WAAW;oBACrB,MAAM,EAAE;wBACJ,0CAEA;wBACA,mEAGA;qBAEH;oBACD,QAAQ,EAAE,yFAET;iBACF;;;;;wBAOE,KAAK;;4BA9BR;;SAwBa,iBAAiB","sourcesContent":["import {Component, Input} from '@angular/core';\nimport {Wechat} from \"../../providers/wechat\";\n\n// import {Wechat} from \"../../providers/wechat\";\n\n/**\n * 实现微信浏览器内点击预览\n */\n@Component({\n  selector: 'rich-text',\n  styles: [\n      `rich-text {\n      display: block\n    }`,\n      `rich-text img {\n      display: block;\n      width: 100%;\n    }`\n\n  ],\n  template: `\n    <div [innerHTML]=\"_html |sanitizer:'HTML'\" (click)=\"click($event)\"></div>\n  `\n})\nexport class RichTextComponent\n{\n  _html: string = \"\";\n  private imgUrls: string[];\n\n\n  @Input()\n  get src()\n  {\n    return this._html;\n  }\n\n  set src(html: string)\n  {\n    this._html = html;\n    this.imgUrls = [];\n    html.replace(/<img src=['\"]([^['\"]+)['\"]/g, (a, url) => {\n      this.imgUrls.push(url);\n      return a\n    });\n  }\n\n  constructor()\n  {\n  }\n\n  click($event)\n  {\n    let target = $event.target || $event.srcElement;\n    if (target.tagName.toLowerCase() != \"img\") {\n      return\n    }\n\n    let src = target.src;\n    try { Wechat.previewImage(this.imgUrls, src);} catch (e) { console.error(\"微信预览失败\", e) }\n  }\n}\n"]}
{"version":3,"file":"wechat.js","sourceRoot":"","sources":["../../../src/providers/wechat.ts"],"names":[],"mappings":"AAAA,OAAO,uBAAuB,CAAC;AAC/B,OAAO,EAAC,UAAU,EAAC,MAAM,iBAAiB,CAAC;;AAS3C,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AAC7C,KAAK,CAAC,GAAG,GAAG,gDAAgD,CAAC;AAC7D,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;;;;;;;;;;IAoG5D,MAAM;;IACG,mBAAY;;IAAnB,UAAoB,MAA6B;QAE/C,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;YACf,MAAM,CAAC,aAAa,OAApB,MAAM,EAAkB,MAAM,CAAC,KAAK,EAAC;SACtC,CAAC,CAAC,KAAK,CAAC,UAAA,KAAK,IAAI,OAAA,OAAO,CAAC,KAAK,CAAC,aAAa,EAAE,KAAK,CAAC,EAAnC,CAAmC,CAAC,CAAC;KACxD;IAGH,eAAe;;IACN,kBAAW;;IAAlB;QAEE,IAAI,WAAW,GAAG,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;QACrE,YAAY,CAAC,UAAU,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;QACtD,IAAI,QAAQ,GAAG,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAE3C,EAAE,CAAC,CAAC,QAAQ,IAAI,QAAQ,IAAI,WAAW,CAAC,CAAC,CAAC;YACxC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;SACnC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,IAAI,CAAC;SACb;KACF;IAGD;;OAEG;;;;IACI,oBAAa;;;IAApB,UAAqB,OAAsE;QAEzF,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,UAAA,GAAG,IAAI,OAAA,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,GAAG,CAAC,EAA9B,CAA8B,CAAC;aAC1D,IAAI,CAAC;YACJ,MAAM,CAAC,IAAI,OAAO,CAAS,UAAA,OAAO;gBAChC,EAAE,CAAC,mBAAmB,CAAC;oBACrB,KAAK,EAAE,OAAO,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;oBACjE,IAAI,EAAE,IAAI;;oBACV,IAAI,EAAE,OAAO,CAAC,IAAI;oBAClB,MAAM,EAAE,OAAO,CAAC,MAAM;oBACtB,OAAO,EAAE,cAAM,OAAA,OAAO,CAAC,CAAC,CAAC,EAAV,CAAU;iBAC1B,CAAC,CAAC;gBAEH,EAAE,CAAC,qBAAqB,CAAC;oBACvB,KAAK,EAAE,OAAO,CAAC,KAAK;;oBACpB,IAAI,EAAE,OAAO,CAAC,IAAI;;oBAClB,IAAI,EAAE,OAAO,CAAC,IAAI;;oBAClB,MAAM,EAAE,OAAO,CAAC,MAAM;;oBACtB,IAAI,EAAE,MAAM;;oBACZ,OAAO,EAAE,IAAI;;oBACb,OAAO,EAAE,cAAM,OAAA,OAAO,CAAC,CAAC,CAAC,EAAV,CAAU;iBAC1B,CAAC,CAAC;aAEJ,CAAC,CAAC;SACJ,CAAC,CAAA;KACP;IAED;;;;;;;OAOG;;;;;;;;;IACI,UAAG;;;;;;;;IAAV,UAAW,KASV;QAEC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,IAAI,KAAK,CAAC,SAAS,CAAC;QAErD,IAAI,OAAO,GAAG,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YACxC,KAAK,CAAC,OAAO,GAAG,UAAA,GAAG;gBACjB,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,gBAAgB,IAAI,GAAG,CAAC,OAAO,IAAI,4BAA4B,CAAC,CAAC,CAAC;oBAClF,OAAO,CAAC,SAAS,CAAC,CAAC;iBACpB;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,IAAI,gCAAgC,CAAC,CAAC,CAAC;oBAC3D,MAAM,CAAC,EAAC,IAAI,EAAE,CAAC,EAAE,OAAO,EAAE,MAAM,EAAC,CAAC,CAAC;iBACpC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,IAAI,gCAAgC,CAAC,CAAC,CAAC;oBAC3D,MAAM,CAAC,EAAC,IAAI,EAAE,CAAC,EAAE,OAAO,EAAE,MAAM,EAAC,CAAC,CAAC;iBACpC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,QAAQ,IAAI,CAAC,CAAC,CAAC,CAAC;oBAC7B,MAAM,CAAC,EAAC,IAAI,EAAE,CAAC,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC,CAAC;iBACjC;gBAAC,IAAI,CAAC,CAAC;oBACN,MAAM,CAAC,EAAC,IAAI,EAAE,CAAC,EAAE,OAAO,EAAE,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,OAAO,EAAC,CAAC,CAAC;iBACvD;aACF,CAAC;YAEF,KAAK,CAAC,IAAI,GAAG,UAAA,GAAG;gBACd,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;oBACf,MAAM,CAAC,EAAC,IAAI,EAAE,CAAC,EAAE,OAAO,EAAE,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,OAAO,EAAC,CAAC,CAAC;iBACvD;gBAAC,IAAI,CAAC,CAAC;oBACN,MAAM,CAAC,GAAG,CAAC,CAAC;iBACb;aACF,CAAC;;;YAGF,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;SACrB,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,CAAC;;KAGhB;IAEc,aAAM,GAArB,UAAsB,IAUrB;QAEC,IAAI,aAAa,GAAG,cAAM,OAAA,cAAc,CAAC,MAAM,CAAC,sBAAsB,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,EAAjE,CAAiE,CAAC;QAC5F,EAAE,CAAC,CAAC,OAAO,cAAc,IAAI,WAAW,CAAC,CAAC,CAAC;YACzC,EAAE,CAAC,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBAC9B,QAAQ,CAAC,gBAAgB,CAAC,qBAAqB,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;aACxE;YAAC,IAAI,CAAC,EAAE,CAAC,CAAE,QAAgB,CAAC,WAAW,CAAC,CAAC,CAAC;gBACxC,QAAgB,CAAC,WAAW,CAAC,qBAAqB,EAAE,aAAa,CAAC,CAAC;gBACnE,QAAgB,CAAC,WAAW,CAAC,uBAAuB,EAAE,aAAa,CAAC,CAAC;aACvE;SACF;QAAC,IAAI,CAAC,CAAC;YACN,aAAa,EAAE,CAAC;SACjB;KACF;IAEM,eAAQ,GAAf,UAAgB,KAAa;QAE3B,IAAI,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACtC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG,EAAE,KAAK;YAEpC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC;gBAAC,MAAM,CAAC;YAChD,GAAG,IAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC;YAC1C,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,kBAAkB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;SACnD,CAAC,CAAC;QAEH,MAAM,CAAC,GAAG,CAAC;KACZ;IAEH,OAAO;;IACE,4BAAqB;;IAA5B,UAA6B,KAAa,EAAE,WAAmB,EAAE,KAAc;QAE7E,IAAI,KAAK,GAAG,cAAc,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;QAClD,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,qBAAqB,EAAE,KAAK,CAAC,CAAC;QAE1D,IAAI,GAAG,GAAG,CAAC,KAAK,IAAI,qDAAqD,CAAC;cACpE,SAAS,GAAG,KAAK;cACjB,gBAAgB,GAAG,kBAAkB,CAAC,WAAW,CAAC;cAClD,qBAAqB;cACrB,wBAAwB;cACxB,SAAS,GAAG,KAAK;cACjB,kBAAkB,CAAC;QAEzB,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;KAC9B;IAGH,UAAU;;IACD,qBAAc;;IAArB;QAEE,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAA,GAAG;YACvB,OAAA,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,IAAO,EAAE,CAAC,cAAc,CAAC,EAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAC,CAAC,CAAA,EAAE,CAAC;QAAzF,CAAyF,CAC5F,CAAC;KACH;IAGH,UAAU;;IACD,kBAAW;;IAAlB;QAEE,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YACjC,EAAE,CAAC,WAAW,CAAC;gBACb,IAAI,EAAE,OAAO;;gBACb,OAAO,EAAE,OAAO;gBAChB,IAAI,EAAE,MAAM;aACb,CAAC,CAAC;SACJ,CAAC,CAAC;KACJ;IAEH,gBAAgB;;IACP,mBAAY;;IAAnB,UAAoB,QAGnB;QAEC,EAAE,CAAC,YAAY,CAAC;YACd,QAAQ,EAAE,QAAQ,CAAC,QAAQ;;YAC3B,SAAS,EAAE,QAAQ,CAAC,SAAS;;YAC7B,IAAI,EAAE,EAAE;;YACR,OAAO,EAAE,EAAE;;YACX,KAAK,EAAE,EAAE;;YACT,OAAO,EAAE,EAAE;SACZ,CAAC,CAAC;KACJ;IAEH,OAAO;;IACE,kBAAW;;IAAlB;QAEE,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;YACtB,MAAM,CAAC,IAAI,OAAO,CAAY,UAAC,OAAO,EAAE,MAA2C;gBAC/E,OAAA,EAAE,CAAC,WAAW,CAAC,EAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAC,CAAC;YAAhD,CAAgD,CAAC,CAAC;SACvD,CAAC,CAAC;KACJ;IAEH,OAAO;;IACE,mBAAY;;IAAnB,UAAoB,IAAmB,EAAE,OAAiB;QAExD,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;YAAC,MAAM,CAAC;QAEtC,EAAE,CAAC,YAAY,CAAC;YACd,OAAO,EAAE,OAAO,IAAI,EAAE;;YACtB,IAAI,EAAE,IAAI;SACX,CAAC,CAAC;KACJ;IAED,WAAW;;IACJ,kBAAW;IAAlB;QAEE,OAAO,EAAE,IAAI,WAAW,IAAI,EAAE,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;QACnD,QAAQ,CAAC,IAAI,GAAG,aAAa,CAAC;QAC9B,MAAM,CAAC,KAAK,EAAE,CAAC;KAChB;IAEM,iBAAU,GAAjB;QAAA,iBAWC;QATC,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YACjC,KAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;gBACf,EAAE,CAAC,UAAU,CAAC;oBACZ,UAAU,EAAE,CAAC;;oBACb,QAAQ,EAAE,CAAC,QAAQ,EAAE,SAAS,CAAC;;oBAC/B,OAAO,EAAE,UAAA,GAAG,IAAI,OAAA,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,EAAtB,CAAsB;iBACvC,CAAC,CAAC;aACJ,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;SAClB,CAAC,CAAC;KACJ;IAED;;;OAGG;;;;;IACI,oBAAa;;;;IAApB;QAAqB,mBAAY;aAAZ,UAAY,EAAZ,qBAAY,EAAZ,IAAY;YAAZ,8BAAY;;QAE/B,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,cAAM,OAAA,EAAE,CAAC,aAAa,CAAC,EAAC,QAAQ,EAAE,SAAS,EAAC,CAAC,EAAvC,CAAuC,CAAC,CAAC,KAAK,CAAC,UAAA,CAAC,IAAI,OAAA,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAd,CAAc,CAAC,CAAC;KAC5F;IAED;;;OAGG;;;;;IACI,oBAAa;;;;IAApB;QAAqB,mBAAY;aAAZ,UAAY,EAAZ,qBAAY,EAAZ,IAAY;YAAZ,8BAAY;;QAE/B,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,cAAM,OAAA,EAAE,CAAC,aAAa,CAAC,EAAC,QAAQ,EAAE,SAAS,EAAC,CAAC,EAAvC,CAAuC,CAAC,CAAC,KAAK,CAAC,UAAA,CAAC,IAAI,OAAA,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAd,CAAc,CAAC,CAAC;KAC5F;IAEH,cAAc;;IACL,oBAAa;;IAApB;QAEE,IAAI,EAAE,GAAG,SAAS,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;QAC3C,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;QACpC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,gBAAgB,IAAI,KAAK,CAAC;KAC/C;IAEM,kBAAW,GAAlB,UAAmB,GAAW,EAAE,GAAkB;QAAlB,oBAAA,EAAA,UAAkB;QAEhD,IAAI,KAAK,GAAG,IAAI,CAAC;QACjB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACR,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;SACjC;QAAC,IAAI,CAAC,CAAC;YACN,KAAK,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;SAC7C;QAED,IAAI,YAAY,GAAG,EAAE,CAAC;QACtB,IAAI,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAE5B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACrC,IAAI,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;;YAE9B,EAAE,CAAC,CAAC,OAAO,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,WAAW,CAAC,CAAC,CAAC;gBACjD,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;;aAEjC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC;gBACrD,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;;aAE1D;YAAC,IAAI,CAAC,CAAC;gBACN,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;aACrC;SACF;QAED,IAAI,CAAC,GAAG,YAAY,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC;QAClC,EAAE,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC;YAAC,CAAC,GAAG,IAAI,CAAC;QAC1B,MAAM,CAAC,CAAC,CAAC;KACV;IAEc,WAAI,GAAnB;QAAA,iBA2BC;QAzBC,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YACjC,EAAE,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;gBACvB,OAAO,EAAE,CAAC;aACX;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,UAAA,IAAI;oBACrB,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,QAAQ,CAAC;oBACjC,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;oBAE1B,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;;oBAEhB,EAAE,CAAC,KAAK,CAAC;wBACP,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;wBACxB,OAAO,EAAE,CAAC;qBACX,CAAC,CAAC;oBACH,EAAE,CAAC,KAAK,CAAC;;wBAEP,OAAO,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC;wBACpC,MAAM,CAAC,oBAAoB,CAAC,CAAC;qBAC9B,CAAC,CAAC;iBACJ,CAAC,CAAC,KAAK,CAAC,UAAA,CAAC;oBACR,OAAO,CAAC,KAAK,CAAC,MAAI,IAAI,IAAI,EAAE,cAAW,EAAE,CAAC,CAAC,CAAA;iBAC5C,CAAC,CAAC;aACJ;SACF,CAAC,CAAC;KAEJ;IAGM,kBAAW,GAAlB;QAEE,EAAE,CAAC,WAAW,EAAE,CAAC;QACjB,MAAM,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAA;KAC/B;IAEM,iBAAU,GAAjB;QAEE,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,UAAC,UAA8B;YACtD,EAAE,CAAC,UAAU,CAAC;gBACZ,OAAO,EAAE,UAAC,GAAG;oBACX,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;oBAC7B,UAAU,CAAC,QAAQ,EAAE,CAAC;iBACvB;aACF,CAAC,CAAC;SACJ,CAAC,CAAA;KACH;IAED;;;;OAIG;;;;;;IACI,WAAI;;;;;IAAX,UAAY,GAAW;QAErB,MAAM,CAAC,IAAI,CAAC,+DAA6D,GAAG,+BAA4B,CAAC,CAAC;KAC3G;IAED,kCAAkC;;IACnB,uBAAgB;;IAA/B;QAEE,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,UAAC,UAA8B;YACtD,EAAE,CAAC,gBAAgB,CAAC;gBAClB,IAAI,EAAE,UAAC,GAAG;oBACR,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;iBAC9B;gBACD,QAAQ,EAAE,UAAC,GAAG;oBACZ,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;oBAC7B,UAAU,CAAC,QAAQ,EAAE,CAAA;iBACtB;aACF,CAAC,CAAC;SACJ,CAAC,CAAA;KACH;IAEM,qBAAc,GAArB,UAAsB,OAAO;QAE3B,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,UAAC,UAA8B;YACtD,EAAE,CAAC,cAAc,CAAC;gBAChB,OAAO,EAAE,OAAO;;gBAChB,kBAAkB,EAAE,CAAC;;gBACrB,OAAO,EAAE,UAAU,GAAG;;oBAEpB,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;oBACrC,UAAU,CAAC,QAAQ,EAAE,CAAC;iBACvB;aACF,CAAC,CAAC;SACJ,CAAC,CAAC;KACJ;mBA3dqB,KAAK;yBACE,KAAK;mCACK,mBAAmB;sBAChC;QACxB,qBAAqB;QACrB,uBAAuB;QACvB,eAAe;QACf,kBAAkB;QAClB,kBAAkB;QAClB,aAAa;QACb,YAAY;QACZ,kBAAkB;QAClB,WAAW;QACX,YAAY;QACZ,WAAW;QACX,gBAAgB;QAChB,aAAa;QACb,eAAe;QACf,aAAa;QACb,cAAc;QACd,aAAa;QACb,eAAe;QACf,gBAAgB;QAChB,gBAAgB;QAChB,cAAc;QACd,aAAa;QACb,gBAAgB;QAChB,gBAAgB;QAChB,eAAe;QACf,eAAe;QACf,wBAAwB;QACxB,wBAAwB;QACxB,aAAa;QACb,YAAY;QACZ,aAAa;QACb,yBAAyB;QACzB,SAAS;QACT,YAAY;QACZ,UAAU;QACV,aAAa;KACd;wBAC0B;;QAEzB,cAAc,EAAE,wBAAwB;;QACxC,QAAQ,EAAE,kBAAkB;;QAC5B,QAAQ,EAAE,kBAAkB;;QAC5B,UAAU,EAAE,oBAAoB;;QAChC,OAAO,EAAE,kBAAkB;;QAC3B,OAAO,EAAE,kBAAkB;;QAC3B,WAAW,EAAE,qBAAqB;;;QAGlC,iBAAiB,EAAE,2BAA2B;;QAC9C,eAAe,EAAE,yBAAyB;;QAC1C,QAAQ,EAAE,mBAAmB;;QAC7B,eAAe,EAAE,yBAAyB;;QAC1C,cAAc,EAAE,yBAAyB;;QACzC,WAAW,EAAE,sBAAsB;;QACnC,QAAQ,EAAE,mBAAmB;;;QAG7B,QAAQ,EAAE,kBAAkB;;QAC5B,MAAM,EAAE,iBAAiB;;QACzB,QAAQ,EAAE,kBAAkB;;QAC5B,WAAW,EAAE,qBAAqB;;QAClC,SAAS,EAAE,mBAAmB;;QAC9B,oBAAoB,EAAE,4BAA4B;;QAClD,gBAAgB,EAAE,yBAAyB;;QAC3C,WAAW,EAAE,sBAAsB;;QACnC,WAAW,EAAE,sBAAsB;KACpC;mBAEqC;QACpC,MAAM,CAAC,UAAU,CAAC,QAAQ;QAC1B,MAAM,CAAC,UAAU,CAAC,eAAe;QACjC,MAAM,CAAC,UAAU,CAAC,cAAc;QAChC,MAAM,CAAC,UAAU,CAAC,WAAW;QAC7B,MAAM,CAAC,UAAU,CAAC,QAAQ;QAC1B,MAAM,CAAC,UAAU,CAAC,MAAM;QACxB,MAAM,CAAC,UAAU,CAAC,QAAQ;QAC1B,MAAM,CAAC,UAAU,CAAC,WAAW;QAC7B,MAAM,CAAC,UAAU,CAAC,SAAS;QAC3B,MAAM,CAAC,UAAU,CAAC,oBAAoB;QACtC,MAAM,CAAC,UAAU,CAAC,gBAAgB;QAClC,MAAM,CAAC,UAAU,CAAC,WAAW;QAC7B,MAAM,CAAC,UAAU,CAAC,WAAW;KAC9B;iBA5GH;;SAoBa,MAAM;AAgenB,IAAA;;;iBApfA;IA4fC,CAAA;AARD,kBAQC;AAED,IAAA;;;oBA9fA;IAygBC,CAAA;AAXD,qBAWC;AAED,IAAA;;wBAEqB,SAAS;yBACR,UAAU;sBACb,gBAAgB;;qBA/gBnC;IAghBC,CAAA;AALD,sBAKC","sourcesContent":["import \"rxjs/add/operator/map\";\nimport {Observable} from \"rxjs/Observable\";\nimport {Subscriber} from \"rxjs/Subscriber\";\n// import \"http://res.wx.qq.com/open/js/jweixin-1.2.0.js\";\n// import \"https://res.wx.qq.com/open/js/jweixin-1.2.0.js\";\ndeclare let wx;\ndeclare let WeixinJSBridge;\n\n\n// 注入微信 js\nlet jssdk = document.createElement('script');\njssdk.src = 'https://res.wx.qq.com/open/js/jweixin-1.2.0.js';\ndocument.getElementsByTagName('head')[0].appendChild(jssdk);\n\n/**\n * js sdk\n * http://res.wx.qq.com/open/js/jweixin-1.1.0.js\n *\n * @see <a href=\"https://mp.weixin.qq.com/wiki\">微信公众平台技术文档</a>\n */\nexport class Wechat\n{\n  public static DEBUG = false;\n  private static initialized = false;\n  private static COOKIE_KEY_AUTH_STATE = \"cookie_auth_state\";\n  private static API_LIST = [\n    \"onMenuShareTimeline\",\n    \"onMenuShareAppMessage\",\n    \"onMenuShareQQ\",\n    \"onMenuShareWeibo\",\n    \"onMenuShareQZone\",\n    \"startRecord\",\n    \"stopRecord\",\n    \"onVoiceRecordEnd\",\n    \"playVoice\",\n    \"pauseVoice\",\n    \"stopVoice\",\n    \"onVoicePlayEnd\",\n    \"uploadVoice\",\n    \"downloadVoice\",\n    \"chooseImage\",\n    \"previewImage\",\n    \"uploadImage\",\n    \"downloadImage\",\n    \"translateVoice\",\n    \"getNetworkType\",\n    \"openLocation\",\n    \"getLocation\",\n    \"hideOptionMenu\",\n    \"showOptionMenu\",\n    \"hideMenuItems\",\n    \"showMenuItems\",\n    \"hideAllNonBaseMenuItem\",\n    \"showAllNonBaseMenuItem\",\n    \"closeWindow\",\n    \"scanQRCode\",\n    \"chooseWXPay\",\n    \"openProductSpecificView\",\n    \"addCard\",\n    \"chooseCard\",\n    \"openCard\",\n    \"openAddress\"\n  ];\n  public static MENU_ITEMS = {\n    //基本类\n    EXPOSE_ARTICLE: \"menuItem:exposeArticle\",     //举报:\n    SET_FONT: \"menuItem:setFont\",                 //调整字体:\n    DAY_MODE: \"menuItem:dayMode\",                 //日间模式:\n    NIGHT_MODE: \"menuItem:nightMode\",             //夜间模式:\n    REFRESH: \"menuItem:refresh\",                  //刷新:\n    PROFILE: \"menuItem:profile\",                  //查看公众号（已添加）\n    ADD_CONTACT: \"menuItem:addContact\",           //查看公众号（未添加）\n\n    //传播类\n    SHARE_APP_MESSAGE: \"menuItem:share:appMessage\",//发送给朋友\n    SHARE_TIME_LINE: \"menuItem:share:timeline\",//分享到朋友圈\n    SHARE_QQ: \"menuItem:share:qq\",//分享到QQ\n    SHARE_WEIBO_APP: \"menuItem:share:weiboApp\",//分享到Weibo\n    SHARE_FACEBOOK: \"menuItem:share:facebook\",//分享到FB:\n    SHARE_QZONE: \"menuItem:share:QZone\",//分享到 QQ 空间\n    FAVORITE: \"menuItem:favorite\",//收藏\n\n    // 保护类\n    EDIT_TAG: \"menuItem:editTag\",//编辑标签:\n    DELETE: \"menuItem:delete\",//删除:\n    COPY_URL: \"menuItem:copyUrl\",//复制链接:\n    ORIGIN_PAGE: \"menuItem:originPage\",//原网页:\n    READ_MORE: \"menuItem:readMode\",//阅读模式:\n    OPEN_WITH_QQ_BROWSER: \"menuItem:openWithQQBrowser\",//在QQ浏览器中打开:\n    OPEN_WITH_SAFARI: \"menuItem:openWithSafari\",//在Safari中打开:\n    SHARE_EMAIL: \"menuItem:share:email\",//邮件:\n    SHARE_BRAND: \"menuItem:share:brand\"//一些特殊公众号:\n  };\n\n  private static HIDES: Array<string> = [\n    Wechat.MENU_ITEMS.SHARE_QQ,\n    Wechat.MENU_ITEMS.SHARE_WEIBO_APP,\n    Wechat.MENU_ITEMS.SHARE_FACEBOOK,\n    Wechat.MENU_ITEMS.SHARE_QZONE,\n    Wechat.MENU_ITEMS.EDIT_TAG,\n    Wechat.MENU_ITEMS.DELETE,\n    Wechat.MENU_ITEMS.COPY_URL,\n    Wechat.MENU_ITEMS.ORIGIN_PAGE,\n    Wechat.MENU_ITEMS.READ_MORE,\n    Wechat.MENU_ITEMS.OPEN_WITH_QQ_BROWSER,\n    Wechat.MENU_ITEMS.OPEN_WITH_SAFARI,\n    Wechat.MENU_ITEMS.SHARE_EMAIL,\n    Wechat.MENU_ITEMS.SHARE_BRAND,\n  ];\n\n  private static signer: () => Promise<WXSign>;\n\n//配置签名\n  static configSigner(signer: () => Promise<WXSign>)\n  {\n    this.signer = signer;\n    this.sign().then(() => {\n      Wechat.hideMenuItems(...Wechat.HIDES)\n    }).catch(error => console.error('JS SDK 签名异常', error));\n  }\n\n\n// 获取 auth code\n  static getAuthCode()\n  {\n    let cookieState = localStorage.getItem(Wechat.COOKIE_KEY_AUTH_STATE);\n    localStorage.removeItem(Wechat.COOKIE_KEY_AUTH_STATE);\n    let urlState = Wechat.getUrlParam(\"state\");\n\n    if (urlState && urlState == cookieState) {\n      return Wechat.getUrlParam(\"code\");\n    } else {\n      return null;\n    }\n  }\n\n\n  /**\n   * @return Promise<number> 0-好友，1-朋友圈\n   */\n  static onShareWechat(options: { title: string, desc: string, link: string, imgUrl: string }): Promise<number>\n  {\n    return this.sign().catch(err => console.log(\"jssdk 签名失败\", err))\n        .then(() => {\n          return new Promise<number>(resolve => {\n            wx.onMenuShareTimeline({\n              title: options.title + (options.desc ? \" | \" + options.desc : \"\"),\n              desc: null,// 分享到朋友圈没有 desc 字段，拼接到 title 上\n              link: options.link,\n              imgUrl: options.imgUrl,\n              success: () => resolve(1)\n            });\n\n            wx.onMenuShareAppMessage({\n              title: options.title, // 分享标题\n              desc: options.desc, // 分享描述\n              link: options.link, // 分享链接\n              imgUrl: options.imgUrl, // 分享图标\n              type: 'link', // 分享类型,music、video或link，不填默认为link\n              dataUrl: null, // 如果type是music或video，则要提供数据链接，默认为空\n              success: () => resolve(0)\n            });\n\n          });\n        })\n  }\n\n  /**\n   * 调起微信支付\n   * Tip\n   * 配置安全支付域名\n   * jssdk 配置\n   *\n   * @see <a href=\"https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_7&index=6\">网页端调起支付API</a>\n   */\n  static pay(param: {\n    timeStamp: string, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\n    timestamp?: string,\n    nonceStr: string, // 支付签名随机串，不长于 32 位\n    package: string, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=***）\n    signType: string, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\n    paySign: string, // 支付签名\n    success?: any,\n    fail?: any\n  }): Promise<any>\n  {\n    param.timestamp = param.timestamp || param.timeStamp;\n\n    let callPay = new Promise((resolve, reject) => {\n      param.success = res => {\n        if (res.errMsg == 'chooseWXPay:ok' || res.err_msg == \"get_brand_wcpay_request:ok\") {\n          resolve('success');\n        } else if (res.err_msg == \"get_brand_wcpay_request:cancel\") {\n          reject({code: 1, message: \"取消支付\"});\n        } else if (res.err_msg == \"get_brand_wcpay_request:failed\") {\n          reject({code: 2, message: \"支付失败\"});\n        } else if (res.err_code == 3) {\n          reject({code: 3, message: res});\n        } else {\n          reject({code: 9, message: res.errMsg || res.err_msg});\n        }\n      };\n\n      param.fail = res => {\n        if (res.errMsg) {\n          reject({code: 9, message: res.errMsg || res.err_msg});\n        } else {\n          reject(res);\n        }\n      };\n      //* @deprecated 使用 {@link payOld}, jssdk 的 wx.chooseWxpay\n      // wx.chooseWXPay(param);\n      Wechat.payOld(param)\n    });\n    return callPay;\n\n    // return Wechat.sign().then(() => callPay);\n  }\n\n  private static payOld(sign: {\n    appId?: string,\n    timeStamp: string,    // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\n    timestamp?: string,\n    nonceStr: string,     // 支付签名随机串，不长于 32 位\n    package: string,      // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=***）\n    signType: string,     // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\n    paySign: string,      // 支付签名\n    success?: any,\n    fail?: any\n  })\n  {\n    let onBridgeReady = () => WeixinJSBridge.invoke('getBrandWCPayRequest', sign, sign.success);\n    if (typeof WeixinJSBridge == \"undefined\") {\n      if (document.addEventListener) {\n        document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);\n      } else if ((document as any).attachEvent) {\n        (document as any).attachEvent('WeixinJSBridgeReady', onBridgeReady);\n        (document as any).attachEvent('onWeixinJSBridgeReady', onBridgeReady);\n      }\n    } else {\n      onBridgeReady();\n    }\n  }\n\n  static shareUrl(param: Object): string\n  {\n    let url = location.href.split(\"?\")[0];\n    Object.keys(param).forEach((key, index) => {\n\n      if (!param[key] || param[key] == \"null\") return;\n      url += url.indexOf(\"?\") == -1 ? \"?\" : \"&\";\n      url += key + \"=\" + decodeURIComponent(param[key]);\n    });\n\n    return url;\n  }\n\n// 微信登录\n  static redirectToWechatLogin(appId: string, redirectUrl: string, proxy?: string): void\n  {\n    let state = \"wechat_auth_\" + new Date().getTime();\n    localStorage.setItem(Wechat.COOKIE_KEY_AUTH_STATE, state);\n\n    let url = (proxy || 'https://open.weixin.qq.com/connect/oauth2/authorize')\n        + '?appid=' + appId\n        + '&redirect_uri=' + encodeURIComponent(redirectUrl)\n        + '&response_type=code'\n        + '&scope=snsapi_userinfo'\n        + '&state=' + state\n        + '#wechat_redirect';\n\n    window.location.replace(url);\n  }\n\n\n//获取地理位置接口\n  static getNetworkType(): Promise<any>\n  {\n    return this.sign().then(res =>\n        new Promise((resolve, reject) => { wx.getNetworkType({success: resolve, fail: reject}) })\n    );\n  }\n\n\n//获取地理位置接口\n  static getLocation(): Promise<WXLocation>\n  {\n    return new Promise((resolve, reject) => {\n      wx.getLocation({\n        type: 'gcj02', // 默认为wgs84的gps坐标，如果要返回直接给openLocation用的火星坐标，可传入'gcj02'\n        success: resolve,\n        fail: reject\n      });\n    });\n  }\n\n//使用微信内置地图查看位置接口\n  static openLocation(location: {\n    latitude: number,\n    longitude: number\n  })\n  {\n    wx.openLocation({\n      latitude: location.latitude, // 纬度，浮点数，范围为90 ~ -90\n      longitude: location.longitude, // 经度，浮点数，范围为180 ~ -180。\n      name: '', // 位置名\n      address: '', // 地址详情说明\n      scale: 14, // 地图缩放级别,整形值,范围从1~28。默认为最大\n      infoUrl: '' // 在查看位置界面底部显示的超链接,可点击跳转\n    });\n  }\n\n// 打开地址\n  static openAddress(): Promise<WXAddress>\n  {\n    return this.sign().then(() => {\n      return new Promise<WXAddress>((resolve, reject: (error: { errMsg: string }) => void) =>\n          wx.openAddress({success: resolve, fail: reject}));\n    });\n  }\n\n// 预览图片\n  static previewImage(urls: Array<string>, current ?: string)\n  {\n    if (!urls || urls.length == 0) return;\n\n    wx.previewImage({\n      current: current || '', // 当前显示图片的http链接\n      urls: urls // 需要预览的图片http链接列表\n    });\n  }\n\n  /** 关闭窗口 */\n  static closeWindow()\n  {\n    typeof wx != \"undefined\" && wx && wx.closeWindow();\n    location.href = \"about:blank\";\n    window.close();\n  }\n\n  static scanQRCode(): Promise<any>\n  {\n    return new Promise((resolve, reject) => {\n      this.sign().then(() => {\n        wx.scanQRCode({\n          needResult: 1, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，\n          scanType: [\"qrCode\", \"barCode\"], // 可以指定扫二维码还是一维码，默认二者都有\n          success: res => resolve(res.resultStr)\n        });\n      }).catch(reject);\n    });\n  }\n\n  /**\n   * @param  menuItems 要隐藏的菜单项，只能隐藏“传播类”和“保护类”按钮，所有menu项见附录3\n   * @see {@link Wechat.MENU_ITEMS}\n   */\n  static hideMenuItems(...menuItems)\n  {\n    this.sign().then(() => wx.hideMenuItems({menuList: menuItems})).catch(e => console.log(e));\n  }\n\n  /**\n   * @param  menuItems 要隐藏的菜单项，只能隐藏“传播类”和“保护类”按钮，所有menu项见附录3\n   * @see {@link Wechat.MENU_ITEMS}\n   */\n  static showMenuItems(...menuItems)\n  {\n    this.sign().then(() => wx.showMenuItems({menuList: menuItems})).catch(e => console.log(e));\n  }\n\n// 是否是微信浏览器中打开\n  static isWechatAgent(): boolean\n  {\n    let ua = navigator.userAgent.toLowerCase();\n    let r = ua.match(/MicroMessenger/i);\n    return r && r[0] == \"micromessenger\" || false;\n  }\n\n  static getUrlParam(key: string, url: string = null): string | null\n  {\n    let query = null;\n    if (url) {\n      query = url.split(\"?\")[1] || \"\";\n    } else {\n      query = window.location.search.substring(1);\n    }\n\n    let query_string = {};\n    let vars = query.split('&');\n\n    for (let i = 0; i < vars.length; i++) {\n      let pair = vars[i].split('=');\n      // If first entry with this name\n      if (typeof query_string[pair[0]] === 'undefined') {\n        query_string[pair[0]] = pair[1];\n        // If second entry with this name\n      } else if (typeof query_string[pair[0]] === 'string') {\n        query_string[pair[0]] = [query_string[pair[0]], pair[1]];\n        // If third or later entry with this name\n      } else {\n        query_string[pair[0]].push(pair[1]);\n      }\n    }\n\n    let p = query_string[key] || null;\n    if (p == \"null\") p = null;\n    return p;\n  }\n\n  private static sign(): Promise<any>\n  {\n    return new Promise((resolve, reject) => {\n      if (Wechat.initialized) {\n        resolve();\n      } else {\n        this.signer().then(sign => {\n          sign.jsApiList = Wechat.API_LIST;\n          sign.debug = Wechat.DEBUG;\n\n          wx.config(sign);\n          //签名成功回调\n          wx.ready(() => {\n            this.initialized = true;\n            resolve();\n          });\n          wx.error(() => {\n            // reject(\"jssdk config error\");\n            console.error(\"jssdk config error\");\n            reject(\"jssdk config error\");\n          });\n        }).catch(e => {\n          console.error(`[${new Date()}][WECHAT]`, e)\n        });\n      }\n    });\n\n  }\n\n\n  static startRecord(): Observable<string>\n  {\n    wx.startRecord();\n    return this.onVoiceRecordEnd()\n  }\n\n  static stopRecord(): Observable<string>\n  {\n    return Observable.create((subscriber: Subscriber<string>) => {\n      wx.stopRecord({\n        success: (res) => {\n          subscriber.next(res.localId);\n          subscriber.complete();\n        }\n      });\n    })\n  }\n\n  /**\n   * 获取公众号biz 的方法：打开公众号-查看历史消息-query[biz]\n   * 打开公众号信息页\n   * @param biz MzAwNDEyODA5MQ==\n   */\n  static home(biz: string)\n  {\n    window.open(`https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=${biz}&scene=116#wechat_redirect`);\n  }\n\n  // 录音时间超过一分钟没有停止的时候会执行 complete 回调\n  private static onVoiceRecordEnd(): Observable<string>\n  {\n    return Observable.create((subscriber: Subscriber<string>) => {\n      wx.onVoiceRecordEnd({\n        fail: (res) => {\n          subscriber.error(res.errMsg);\n        },\n        complete: (res) => {\n          subscriber.next(res.localId);\n          subscriber.complete()\n        }\n      });\n    })\n  }\n\n  static translateVoice(localId): Observable<string>\n  {\n    return Observable.create((subscriber: Subscriber<string>) => {\n      wx.translateVoice({\n        localId: localId,           // 需要识别的音频的本地  Id，由录音相关接口获得\n        isShowProgressTips: 1, // 默认为1，显示进度提示\n        success: function (res) {\n          // 语音识别的结果\n          subscriber.next(res.translateResult);\n          subscriber.complete();\n        }\n      });\n    });\n  }\n}\n\nexport class WXSign\n{\n  appId: string; // 必填，公众号的唯一标识\n  timestamp: number; // 必填，生成签名的时间戳\n  nonceStr: string; // 必填，生成签名的随机串\n  signature: string;// 必填，签名\n  jsApiList?: Array<string>; // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n  debug?: boolean; // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n}\n\nexport class WXAddress\n{\n  userName: string;     //\"陈小黑\"\n  telNumber: string;    //\"18888888888\"\n  nationCode: string;   //\"310112\",\n  errMsg: string;       //\"openAddress:ok\",\n  postalCode: string;   //邮编 \"201100\"\n  provinceName: string; //\"上海市\"\n  cityName: string;     //\"上海市\"\n  countryName: string;  //\"闵行区\"\n  detailInfo: string;   //\"闵行区梅陇镇高优商务中心\n}\n\nexport class WXLocation\n{\n  latitude: number = 31.230416;\n  longitude: number = 121.473701;\n  errMsg: string = \"getLocation:ok\";\n}\n\n"]}
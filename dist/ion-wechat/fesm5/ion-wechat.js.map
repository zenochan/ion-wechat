{"version":3,"file":"ion-wechat.js","sources":["ng://ion-wechat/lib/pipes/preview.ts","ng://ion-wechat/lib/pipes/sanitizer.ts","ng://ion-wechat/lib/prototype/date.ts","ng://ion-wechat/lib/pipes/zdate.ts","ng://ion-wechat/lib/pipes/photo.ts","ng://ion-wechat/lib/pipes/pipes.module.ts","ng://ion-wechat/lib/wechat.ts","ng://ion-wechat/lib/service/data.service.ts","ng://ion-wechat/lib/service/ui.service.ts","ng://ion-wechat/lib/ion-wechat.module.ts"],"sourcesContent":["// import {Pipe, PipeTransform} from \"@angular/core\";\n// import {Observable} from \"rxjs/Observable\";\n\nimport {Pipe, PipeTransform} from '@angular/core';\nimport {Observable} from 'rxjs';\n\n/**\n * éæ©ä¸ä¼ çå¾çï¼å¾çæä»¶é¢è§\n *\n * <p>usage\n * <pre>[src]=\"file | preview | async\"</pre>\n */\n@Pipe({name: 'preview'})\nexport class PreviewPipe implements PipeTransform\n{\n  transform(value: any, ...args)\n  {\n    return new Observable(subscriber => {\n      const reader = new FileReader();\n      reader.onload = event => {\n        const result = (event.target as any).result;\n        subscriber.next(result);\n        subscriber.complete();\n      };\n      reader.readAsDataURL(value);\n    });\n  }\n}\n","import {Injectable, Pipe, PipeTransform} from \"@angular/core\";\nimport {DomSanitizer} from \"@angular/platform-browser\";\n\n/**\n * [src]=\"src | sanitizer : 'HTML'\"\n * - NONE\n * - HTML\n * - STYLE\n * - SCRIPT\n * - URL\n * - RESOURCE_URL\n */\n@Pipe({name: 'sanitizer'})\n@Injectable()\nexport class Sanitizer implements PipeTransform\n{\n  SecurityContextMap: any = {NONE: 0, HTML: 1, STYLE: 2, SCRIPT: 3, URL: 4, RESOURCE_URL: 5};\n\n  constructor(public sanitiser: DomSanitizer) { }\n\n  transform(value, args)\n  {\n    let res;\n    value = value + '';\n\n    let context = this.SecurityContextMap.STYLE;\n    if (args && typeof args == \"string\" && this.SecurityContextMap.hasOwnProperty(args.toUpperCase())) {\n      context = this.SecurityContextMap[args.toUpperCase()];\n    }\n\n    switch (context) {\n      case this.SecurityContextMap.HTML:\n        res = this.sanitiser.bypassSecurityTrustHtml(value);\n        break;\n      case this.SecurityContextMap.URL:\n        res = this.sanitiser.bypassSecurityTrustUrl(value);\n        break;\n      case this.SecurityContextMap.SCRIPT:\n        res = this.sanitiser.bypassSecurityTrustScript(value);\n        break;\n      case this.SecurityContextMap.STYLE:\n        res = this.sanitiser.bypassSecurityTrustStyle(value);\n        break;\n      case this.SecurityContextMap.RESOURCE_URL:\n        res = this.sanitiser.bypassSecurityTrustResourceUrl(value);\n        break;\n      default:\n        res = this.sanitiser.sanitize(context, value);\n        break;\n    }\n\n    return res;\n  }\n\n}\n","declare interface Date\n{\n  weekOfYear: () => number[];\n  format: (fmt: string) => string;\n  addDay: (day: number) => this;\n  ONE_DAY: number;\n}\n\nfunction now(format?: string)\n{\n  return new Date().format(format || 'yyyy/MM/dd HH:mm:ss');\n}\n\nDate.prototype.ONE_DAY = 86400000;\n\n// å¨æ¬¡\nDate.prototype.weekOfYear = function() {\n  const year = this.getFullYear();\n  const d = new Date(this);\n  d.setHours(0, 0, 0, 0);\n\n  // å½å¹´çç¬¬ä¸å¤©\n  const yearStart = new Date(year, 0, 1);\n  // ä¿®æ­£ç¬¬ä¸å¤©å¨æ°çåç§»é\n  d.setDate(d.getDate() + yearStart.getDay());\n\n  const deltaDay = (d.getTime() - yearStart.getTime()) / this.ONE_DAY + 1;\n  const weekNo = Math.ceil(deltaDay / 7);\n\n  return [year, weekNo];\n};\n\nDate.prototype.format = function(fmt: string) { // author: meizz\n  const o = {\n    'M+': this.getMonth() + 1,                                      // æä»½\n    'd+': this.getDate(),                                           // æ¥\n    'h+': this.getHours() % 12 === 0 ? 12 : this.getHours() % 12,    // å°æ¶\n    'H+': this.getHours(),                                          // å°æ¶\n    'm+': this.getMinutes(),                                        // å\n    's+': this.getSeconds(),                                        // ç§\n    'q+': Math.floor((this.getMonth() + 3) / 3),                    // å­£åº¦\n    S: this.getMilliseconds()                                     // æ¯«ç§\n  };\n\n  // å¹´\n  if (/(y+)/.test(fmt)) {\n    fmt = fmt.replace(RegExp.$1, (this.getFullYear() + '').substr(4 - RegExp.$1.length));\n  }\n  // ææ\n  if (/(E+)/.test(fmt)) {\n    const week = ['æ¥', 'ä¸', 'äº', 'ä¸', 'å', 'äº', 'å­'];\n    fmt = fmt.replace(RegExp.$1, ((RegExp.$1.length > 1) ? (RegExp.$1.length > 2 ? 'ææ' : 'å¨') : '')\n        + week[this.getDay() + '']);\n  }\n\n  for (const k in o) {\n    if (new RegExp('(' + k + ')').test(fmt)) {\n      fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : (('00' + o[k]).substr(('' + o[k]).length)));\n    }\n  }\n  return fmt;\n};\n\nDate.prototype.addDay = function(days: number) {\n  this.setTime(this.getTime() + this.ONE_DAY * days);\n  return this;\n};\n","import {Pipe, PipeTransform} from '@angular/core';\nimport '../prototype/date';\n\n/**\n * url | photo : 'yyyy-MM-dd' : 'default'\n */\n@Pipe({\n  name: 'zdate',\n})\nexport class ZdatePipe implements PipeTransform\n{\n  transform(value: any, ...args)\n  {\n    if (!value || typeof value !== 'string') {\n      return '';\n    }\n    // å±è½ php ãlaravel é»è®¤æ¶é´\n    if (value.indexOf('1970-01-01') > -1 || value.indexOf('0000-00-00') > -1) {\n      value = null;\n    }\n    if (!value) {\n      return args[1] || '';\n    }\n\n    // compat HH:mm:ss\n    if (value.length === 8 && value.indexOf(':') === 2 && value.lastIndexOf(':') === 5) {\n      value = '2018/1/1 ' + value;\n    }\n\n    value = value.replace(/-/g, '/');\n    return new Date(Date.parse(value)).format(args[0] || 'yyyy/MM/dd');\n  }\n}\n","import {ElementRef, Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({name: 'photo'})\nexport class Photo implements PipeTransform\n{\n  public static BASE_URL = '';\n\n  constructor(private el: ElementRef)\n  {\n  }\n\n  transform(value, width?, height?)\n  {\n    return transPhoto(value, width, height);\n  }\n}\n\nexport function transPhoto(value, width?, height?)\n{\n  if (!value) {\n    return '';\n  }\n\n  const p = value + '';\n\n  if (p.indexOf('http') === 0) { return p; }\n\n  const cdnPrefix = Photo.BASE_URL;\n\n  let url = cdnPrefix + p;\n  if (width) {\n    url += '?imageView2/2/w/' + width;\n    if (height) {\n      url += '/h/' + height;\n    }\n  }\n  return url;\n}\n","import {NgModule} from '@angular/core';\nimport {PreviewPipe} from './preview';\nimport {Sanitizer} from './sanitizer';\nimport {ZdatePipe} from './zdate';\nimport {Photo} from './photo';\n\nconst pipes = [\n  PreviewPipe,\n  Sanitizer,\n  ZdatePipe,\n  Photo\n];\n\n@NgModule({\n  declarations: [...pipes],\n  imports: [],\n  exports: [...pipes]\n})\nexport class IonWechatPipesModule {}\n","// import \"rxjs/add/operator/map\";\n// import {Observable} from \"rxjs/Observable\";\n// import {Subscriber} from \"rxjs/Subscriber\";\n// import \"http://res.wx.qq.com/open/js/jweixin-1.2.0.js\";\n// import \"https://res.wx.qq.com/open/js/jweixin-1.2.0.js\";\nimport {Observable, Subscriber} from 'rxjs';\n\ndeclare let wx;\ndeclare let WeixinJSBridge;\n\n\n// æ³¨å¥å¾®ä¿¡ js\nconst jssdk = document.createElement('script');\njssdk.src = 'https://res.wx.qq.com/open/js/jweixin-1.2.0.js';\ndocument.getElementsByTagName('head')[0].appendChild(jssdk);\n\n\n/**\n * js sdk\n * http://res.wx.qq.com/open/js/jweixin-1.1.0.js\n *\n * @see <a href=\"https://mp.weixin.qq.com/wiki\">å¾®ä¿¡å¬ä¼å¹³å°ææ¯ææ¡£</a>\n *\n * - [Angularæ¥é: Error encountered in metadata generated for exported symbol](https://blog.csdn.net/qq_30101131/article/details/87794721)\n */\n// @dynamic\nexport class Wechat\n{\n  public static DEBUG = false;\n  private static initialized = false;\n  private static COOKIE_KEY_AUTH_STATE = 'cookie_auth_state';\n  private static API_LIST = [\n    'onMenuShareTimeline',\n    'onMenuShareAppMessage',\n    'onMenuShareQQ',\n    'onMenuShareWeibo',\n    'onMenuShareQZone',\n    'startRecord',\n    'stopRecord',\n    'onVoiceRecordEnd',\n    'playVoice',\n    'pauseVoice',\n    'stopVoice',\n    'onVoicePlayEnd',\n    'uploadVoice',\n    'downloadVoice',\n    'chooseImage',\n    'previewImage',\n    'uploadImage',\n    'downloadImage',\n    'translateVoice',\n    'getNetworkType',\n    'openLocation',\n    'getLocation',\n    'hideOptionMenu',\n    'showOptionMenu',\n    'hideMenuItems',\n    'showMenuItems',\n    'hideAllNonBaseMenuItem',\n    'showAllNonBaseMenuItem',\n    'closeWindow',\n    'scanQRCode',\n    'chooseWXPay',\n    'openProductSpecificView',\n    'addCard',\n    'chooseCard',\n    'openCard',\n    'openAddress'\n  ];\n  public static MENU_ITEMS = {\n    // åºæ¬ç±»\n    EXPOSE_ARTICLE: 'menuItem:exposeArticle',     // ä¸¾æ¥:\n    SET_FONT: 'menuItem:setFont',                 // è°æ´å­ä½:\n    DAY_MODE: 'menuItem:dayMode',                 // æ¥é´æ¨¡å¼:\n    NIGHT_MODE: 'menuItem:nightMode',             // å¤é´æ¨¡å¼:\n    REFRESH: 'menuItem:refresh',                  // å·æ°:\n    PROFILE: 'menuItem:profile',                  // æ¥çå¬ä¼å·ï¼å·²æ·»å ï¼\n    ADD_CONTACT: 'menuItem:addContact',           // æ¥çå¬ä¼å·ï¼æªæ·»å ï¼\n\n    // ä¼ æ­ç±»\n    SHARE_APP_MESSAGE: 'menuItem:share:appMessage',   // åéç»æå\n    SHARE_TIME_LINE: 'menuItem:share:timeline',       // åäº«å°æåå\n    SHARE_QQ: 'menuItem:share:qq',                    // åäº«å°QQ\n    SHARE_WEIBO_APP: 'menuItem:share:weiboApp',       // åäº«å°Weibo\n    SHARE_FACEBOOK: 'menuItem:share:facebook',        // åäº«å°FB:\n    SHARE_QZONE: 'menuItem:share:QZone',              // åäº«å° QQ ç©ºé´\n    FAVORITE: 'menuItem:favorite',                    // æ¶è\n\n    // ä¿æ¤ç±»\n    EDIT_TAG: 'menuItem:editTag',                       // ç¼è¾æ ç­¾:\n    DELETE: 'menuItem:delete',                          // å é¤:\n    COPY_URL: 'menuItem:copyUrl',                       // å¤å¶é¾æ¥:\n    ORIGIN_PAGE: 'menuItem:originPage',                 // åç½é¡µ:\n    READ_MORE: 'menuItem:readMode',                     // éè¯»æ¨¡å¼:\n    OPEN_WITH_QQ_BROWSER: 'menuItem:openWithQQBrowser', // å¨QQæµè§å¨ä¸­æå¼:\n    OPEN_WITH_SAFARI: 'menuItem:openWithSafari',        // å¨Safariä¸­æå¼:\n    SHARE_EMAIL: 'menuItem:share:email',                // é®ä»¶:\n    SHARE_BRAND: 'menuItem:share:brand'                 // ä¸äºç¹æ®å¬ä¼å·:\n  };\n\n  private static HIDES: Array<string> = [\n    Wechat.MENU_ITEMS.SHARE_QQ,\n    Wechat.MENU_ITEMS.SHARE_WEIBO_APP,\n    Wechat.MENU_ITEMS.SHARE_FACEBOOK,\n    Wechat.MENU_ITEMS.SHARE_QZONE,\n    Wechat.MENU_ITEMS.EDIT_TAG,\n    Wechat.MENU_ITEMS.DELETE,\n    Wechat.MENU_ITEMS.COPY_URL,\n    Wechat.MENU_ITEMS.ORIGIN_PAGE,\n    Wechat.MENU_ITEMS.READ_MORE,\n    Wechat.MENU_ITEMS.OPEN_WITH_QQ_BROWSER,\n    Wechat.MENU_ITEMS.OPEN_WITH_SAFARI,\n    Wechat.MENU_ITEMS.SHARE_EMAIL,\n    Wechat.MENU_ITEMS.SHARE_BRAND,\n  ];\n\n  private static signer: () => Promise<WXSign>;\n\n  //  éç½®ç­¾å\n  static configSigner(signer: () => Promise<WXSign>)\n  {\n    this.signer = signer;\n    this.sign().then(() => {\n      Wechat.hideMenuItems(...Wechat.HIDES);\n    }).catch(error => console.error('JS SDK ç­¾åå¼å¸¸', error));\n  }\n\n\n// è·å auth code\n  static getAuthCode()\n  {\n    const cookieState = localStorage.getItem(Wechat.COOKIE_KEY_AUTH_STATE);\n    localStorage.removeItem(Wechat.COOKIE_KEY_AUTH_STATE);\n    const urlState = Wechat.getUrlParam('state');\n\n    if (urlState && urlState === cookieState) {\n      return Wechat.getUrlParam('code');\n    } else {\n      return null;\n    }\n  }\n\n\n  /**\n   * @return Promise<number> 0-å¥½åï¼1-æåå\n   */\n  static onShareWechat(options: { title: string, desc: string, link: string, imgUrl: string }): Promise<number>\n  {\n\n    if (options.imgUrl.indexOf('http') === -1) {\n      options.imgUrl = location.href.split('?')[0] + options.imgUrl;\n    }\n\n    return this.sign().catch(err => console.log('jssdk ç­¾åå¤±è´¥', err))\n        .then(() => {\n          return new Promise<number>(resolve => {\n            wx.onMenuShareTimeline({\n              title: options.title + (options.desc ? ' | ' + options.desc : ''),\n              desc: null, // åäº«å°æååæ²¡æ desc å­æ®µï¼æ¼æ¥å° title ä¸\n              link: options.link,\n              imgUrl: options.imgUrl,\n              success: () => resolve(1)\n            });\n\n            wx.onMenuShareAppMessage({\n              title: options.title, // åäº«æ é¢\n              desc: options.desc, // åäº«æè¿°\n              link: options.link, // åäº«é¾æ¥\n              imgUrl: options.imgUrl, // åäº«å¾æ \n              type: 'link', // åäº«ç±»å,musicãvideoælinkï¼ä¸å¡«é»è®¤ä¸ºlink\n              dataUrl: null, // å¦ætypeæ¯musicævideoï¼åè¦æä¾æ°æ®é¾æ¥ï¼é»è®¤ä¸ºç©º\n              success: () => resolve(0)\n            });\n\n          });\n        });\n  }\n\n  /**\n   * è°èµ·å¾®ä¿¡æ¯ä»\n   * Tip\n   * éç½®å®å¨æ¯ä»åå\n   * jssdk éç½®\n   *\n   * @see <a href=\"https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_7&index=6\">ç½é¡µç«¯è°èµ·æ¯ä»API</a>\n   */\n  static pay(param: {\n    timeStamp: string, // æ¯ä»ç­¾åæ¶é´æ³ï¼æ³¨æå¾®ä¿¡jssdkä¸­çææä½¿ç¨timestampå­æ®µåä¸ºå°åãä½ææ°ççæ¯ä»åå°çæç­¾åä½¿ç¨çtimeStampå­æ®µåéå¤§åå¶ä¸­çSå­ç¬¦\n    timestamp?: string,\n    nonceStr: string, // æ¯ä»ç­¾åéæºä¸²ï¼ä¸é¿äº 32 ä½\n    package: string, // ç»ä¸æ¯ä»æ¥å£è¿åçprepay_idåæ°å¼ï¼æäº¤æ ¼å¼å¦ï¼prepay_id=***ï¼\n    signType: string, // ç­¾åæ¹å¼ï¼é»è®¤ä¸º'SHA1'ï¼ä½¿ç¨æ°çæ¯ä»éä¼ å¥'MD5'\n    paySign: string, // æ¯ä»ç­¾å\n    success?: any,\n    fail?: any\n  }): Promise<any>\n  {\n    param.timestamp = param.timestamp || param.timeStamp;\n\n    const callPay = new Promise((resolve, reject) => {\n      param.success = res => {\n        if (res.errMsg === 'chooseWXPay:ok' || res.err_msg === 'get_brand_wcpay_request:ok') {\n          resolve('success');\n        } else if (res.err_msg === 'get_brand_wcpay_request:cancel') {\n          reject({code: 1, message: 'åæ¶æ¯ä»'});\n        } else if (res.err_msg === 'get_brand_wcpay_request:failed') {\n          reject({code: 2, message: 'æ¯ä»å¤±è´¥'});\n        } else if (res.err_code === 3) {\n          reject({code: 3, message: res});\n        } else {\n          reject({code: 9, message: res.errMsg || res.err_msg});\n        }\n      };\n\n      param.fail = res => {\n        if (res.errMsg) {\n          reject({code: 9, message: res.errMsg || res.err_msg});\n        } else {\n          reject(res);\n        }\n      };\n      // @deprecated ä½¿ç¨ {@link payOld}, jssdk ç wx.chooseWxpay\n      // wx.chooseWXPay(param);\n      Wechat.payOld(param);\n    });\n    return callPay;\n\n    // return Wechat.sign().then(() => callPay);\n  }\n\n  private static payOld(sign: {\n    appId?: string,\n    timeStamp: string,    // æ¯ä»ç­¾åæ¶é´æ³ï¼æ³¨æå¾®ä¿¡jssdkä¸­çææä½¿ç¨timestampå­æ®µåä¸ºå°åãä½ææ°ççæ¯ä»åå°çæç­¾åä½¿ç¨çtimeStampå­æ®µåéå¤§åå¶ä¸­çSå­ç¬¦\n    timestamp?: string,\n    nonceStr: string,     // æ¯ä»ç­¾åéæºä¸²ï¼ä¸é¿äº 32 ä½\n    package: string,      // ç»ä¸æ¯ä»æ¥å£è¿åçprepay_idåæ°å¼ï¼æäº¤æ ¼å¼å¦ï¼prepay_id=***ï¼\n    signType: string,     // ç­¾åæ¹å¼ï¼é»è®¤ä¸º'SHA1'ï¼ä½¿ç¨æ°çæ¯ä»éä¼ å¥'MD5'\n    paySign: string,      // æ¯ä»ç­¾å\n    success?: any,\n    fail?: any\n  })\n  {\n    const onBridgeReady = () => WeixinJSBridge.invoke('getBrandWCPayRequest', sign, sign.success);\n    if (typeof WeixinJSBridge === 'undefined') {\n      if (document.addEventListener) {\n        document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);\n      } else if ((document as any).attachEvent) {\n        (document as any).attachEvent('WeixinJSBridgeReady', onBridgeReady);\n        (document as any).attachEvent('onWeixinJSBridgeReady', onBridgeReady);\n      }\n    } else {\n      onBridgeReady();\n    }\n  }\n\n  static shareUrl(param: object): string\n  {\n    let url = location.href.split('?')[0];\n    Object.keys(param).forEach((key, index) => {\n\n      if (!param[key] || param[key] === 'null') {\n        return;\n      }\n      url += url.indexOf('?') === -1 ? '?' : '&';\n      url += key + '=' + decodeURIComponent(param[key]);\n    });\n\n    return url;\n  }\n\n  // å¾®ä¿¡ç»å½\n  static code(options: {\n    /** å¬ä¼å· app id */\n    appid: string,\n    /** å¼æ¾å¹³å° app id */\n    component_appid?: string,\n    /** åè° ä¸è¦ uri encode */\n    redirect_uri?: string,\n    scope?: 'snsapi_userinfo' | 'snsapi_base',\n    /** ä»£ç, ç¨äºéææååå®ç°ææä¸å¡ */\n    proxy?: string\n  }): Observable<string>\n  {\n    return Observable.create(sub => {\n      const code = this.getAuthCode();\n      if (!code) {\n        const op: any = options || {};\n        op.scope = op.scope || 'snsapi_userinfo';\n        op.state = 'wechat_auth_' + new Date().getTime();\n        op.redirect_uri = encodeURIComponent(options.redirect_uri || location.href.split('?')[0]);\n        op.response_type = 'code';\n\n        localStorage.setItem(Wechat.COOKIE_KEY_AUTH_STATE, op.state);\n\n        let url = (options.proxy || 'https://open.weixin.qq.com/connect/oauth2/authorize');\n        const query = Object.keys(op).map(key => `${key}=${op[key]}`).join('&');\n        url += `?${query}#wechat_redirect`;\n        window.location.replace(url);\n        sub.complete();\n      } else {\n        sub.next(code);\n        sub.complete();\n      }\n    });\n  }\n\n  //  è·åå°çä½ç½®æ¥å£\n  static getNetworkType(): Promise<any>\n  {\n    return this.sign().then(res =>\n        new Promise((resolve, reject) => { wx.getNetworkType({success: resolve, fail: reject}); })\n    );\n  }\n\n\n  //  è·åå°çä½ç½®æ¥å£\n  static getLocation(): Promise<WXLocation>\n  {\n    return new Promise((resolve, reject) => {\n      wx.getLocation({\n        type: 'gcj02', // é»è®¤ä¸ºwgs84çgpsåæ ï¼å¦æè¦è¿åç´æ¥ç»openLocationç¨çç«æåæ ï¼å¯ä¼ å¥'gcj02'\n        success: resolve,\n        fail: reject\n      });\n    });\n  }\n\n  //  ä½¿ç¨å¾®ä¿¡åç½®å°å¾æ¥çä½ç½®æ¥å£\n  static openLocation(location: {\n    latitude: number,\n    longitude: number\n  })\n  {\n    wx.openLocation({\n      latitude: location.latitude, // çº¬åº¦ï¼æµ®ç¹æ°ï¼èå´ä¸º90 ~ -90\n      longitude: location.longitude, // ç»åº¦ï¼æµ®ç¹æ°ï¼èå´ä¸º180 ~ -180ã\n      name: '', // ä½ç½®å\n      address: '', // å°åè¯¦æè¯´æ\n      scale: 14, // å°å¾ç¼©æ¾çº§å«,æ´å½¢å¼,èå´ä»1~28ãé»è®¤ä¸ºæå¤§\n      infoUrl: '' // å¨æ¥çä½ç½®çé¢åºé¨æ¾ç¤ºçè¶é¾æ¥,å¯ç¹å»è·³è½¬\n    });\n  }\n\n// æå¼å°å\n  static openAddress(): Promise<WXAddress>\n  {\n    return this.sign().then(() => {\n      return new Promise<WXAddress>((resolve, reject: (error: { errMsg: string }) => void) =>\n          wx.openAddress({success: resolve, fail: reject}));\n    });\n  }\n\n// é¢è§å¾ç\n  static previewImage(urls: Array<string>, current ?: string)\n  {\n    if (!urls || urls.length === 0) {\n      return;\n    }\n\n    wx.previewImage({\n      current: current || '', // å½åæ¾ç¤ºå¾ççhttpé¾æ¥\n      // tslint:disable-next-line\n      urls: urls              // éè¦é¢è§çå¾çhttpé¾æ¥åè¡¨\n    });\n  }\n\n  /** å³é­çªå£ */\n  static closeWindow()\n  {\n    if (typeof wx !== 'undefined' && wx) {\n      wx.closeWindow();\n    }\n    location.href = 'about:blank';\n    window.close();\n  }\n\n  static scanQRCode(): Promise<any>\n  {\n    return new Promise((resolve, reject) => {\n      this.sign().then(() => {\n        wx.scanQRCode({\n          needResult: 1, // é»è®¤ä¸º0ï¼æ«æç»æç±å¾®ä¿¡å¤çï¼1åç´æ¥è¿åæ«æç»æï¼\n          scanType: ['qrCode', 'barCode'], // å¯ä»¥æå®æ«äºç»´ç è¿æ¯ä¸ç»´ç ï¼é»è®¤äºèé½æ\n          success: res => resolve(res.resultStr)\n        });\n      }).catch(reject);\n    });\n  }\n\n  /**\n   * @param  menuItems è¦éèçèåé¡¹ï¼åªè½éèâä¼ æ­ç±»âåâä¿æ¤ç±»âæé®ï¼ææmenué¡¹è§éå½3\n   * @see {@link Wechat.MENU_ITEMS}\n   */\n  static hideMenuItems(...menuItems)\n  {\n    this.sign().then(() => wx.hideMenuItems({menuList: menuItems})).catch(e => console.log(e));\n  }\n\n  /**\n   * @param  menuItems è¦éèçèåé¡¹ï¼åªè½éèâä¼ æ­ç±»âåâä¿æ¤ç±»âæé®ï¼ææmenué¡¹è§éå½3\n   * @see {@link Wechat.MENU_ITEMS}\n   */\n  static showMenuItems(...menuItems)\n  {\n    this.sign().then(() => wx.showMenuItems({menuList: menuItems})).catch(e => console.log(e));\n  }\n\n// æ¯å¦æ¯å¾®ä¿¡æµè§å¨ä¸­æå¼\n  static isWechatAgent(): boolean\n  {\n    const ua = navigator.userAgent.toLowerCase();\n    const r = ua.match(/MicroMessenger/i);\n    return r && r[0] === 'micromessenger' || false;\n  }\n\n  static getUrlParam(key: string, url: string = null): string | null\n  {\n    let query = null;\n    if (url) {\n      query = url.split('?')[1] || '';\n    } else {\n      query = window.location.search.substring(1);\n    }\n\n    const queryString = {};\n    const vars = query.split('&');\n\n    for (const item of vars) {\n      const pair = item.split('=');\n      // If first entry with this name\n      if (typeof queryString[pair[0]] === 'undefined') {\n        queryString[pair[0]] = pair[1];\n        // If second entry with this name\n      } else if (typeof queryString[pair[0]] === 'string') {\n        queryString[pair[0]] = [queryString[pair[0]], pair[1]];\n        // If third or later entry with this name\n      } else {\n        queryString[pair[0]].push(pair[1]);\n      }\n    }\n\n    let p = queryString[key] || null;\n    if (p === 'null') {\n      p = null;\n    }\n    return p;\n  }\n\n  private static sign(): Promise<any>\n  {\n    return new Promise((resolve, reject) => {\n      if (Wechat.initialized) {\n        resolve();\n      } else {\n        this.signer().then(sign => {\n          sign.jsApiList = Wechat.API_LIST;\n          sign.debug = Wechat.DEBUG;\n\n          wx.config(sign);\n          // ç­¾åæååè°\n          wx.ready(() => {\n            this.initialized = true;\n            resolve();\n          });\n          wx.error(() => {\n            // reject(\"jssdk config error\");\n            console.error('jssdk config error');\n            reject('jssdk config error');\n          });\n        }).catch(e => {\n          console.error(`[${new Date()}][WECHAT]`, e);\n        });\n      }\n    });\n\n  }\n\n\n  static startRecord(): Observable<string>\n  {\n    wx.startRecord();\n    return this.onVoiceRecordEnd();\n  }\n\n  static stopRecord(): Observable<string>\n  {\n    return Observable.create((subscriber: Subscriber<string>) => {\n      wx.stopRecord({\n        success: (res) => {\n          subscriber.next(res.localId);\n          subscriber.complete();\n        }\n      });\n    });\n  }\n\n  /**\n   * è·åå¬ä¼å·biz çæ¹æ³ï¼æå¼å¬ä¼å·-æ¥çåå²æ¶æ¯-query[biz]\n   * æå¼å¬ä¼å·ä¿¡æ¯é¡µ\n   * @param biz MzAwNDEyODA5MQ==\n   */\n  static home(biz: string)\n  {\n    window.open(`https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=${biz}&scene=116#wechat_redirect`);\n  }\n\n  // å½é³æ¶é´è¶è¿ä¸åéæ²¡æåæ­¢çæ¶åä¼æ§è¡ complete åè°\n  private static onVoiceRecordEnd(): Observable<string>\n  {\n    return Observable.create((subscriber: Subscriber<string>) => {\n      wx.onVoiceRecordEnd({\n        fail: (res) => {\n          subscriber.error(res.errMsg);\n        },\n        complete: (res) => {\n          subscriber.next(res.localId);\n          subscriber.complete();\n        }\n      });\n    });\n  }\n\n  static translateVoice(localId): Observable<string>\n  {\n    return new Observable((subscriber: Subscriber<string>) => {\n      wx.translateVoice({\n        localId,                // éè¦è¯å«çé³é¢çæ¬å°  Idï¼ç±å½é³ç¸å³æ¥å£è·å¾\n        isShowProgressTips: 1,  // é»è®¤ä¸º1ï¼æ¾ç¤ºè¿åº¦æç¤º\n        success(res)\n        {\n          // è¯­é³è¯å«çç»æ\n          subscriber.next(res.translateResult);\n          subscriber.complete();\n        }\n      });\n    });\n  }\n}\n\nexport interface WXSign\n{\n  appId: string;              // å¿å¡«ï¼å¬ä¼å·çå¯ä¸æ è¯\n  timestamp: number;          // å¿å¡«ï¼çæç­¾åçæ¶é´æ³\n  nonceStr: string;           // å¿å¡«ï¼çæç­¾åçéæºä¸²\n  signature: string;          // å¿å¡«ï¼ç­¾å\n  jsApiList?: Array<string>;  // å¿å¡«ï¼éè¦ä½¿ç¨çJSæ¥å£åè¡¨ï¼ææJSæ¥å£åè¡¨è§éå½2\n  debug?: boolean;            // å¼å¯è°è¯æ¨¡å¼,è°ç¨çææapiçè¿åå¼ä¼å¨å®¢æ·ç«¯alertåºæ¥ï¼è¥è¦æ¥çä¼ å¥çåæ°ï¼å¯ä»¥å¨pcç«¯æå¼ï¼åæ°ä¿¡æ¯ä¼éè¿logæåºï¼ä»å¨pcç«¯æ¶æä¼æå°ã\n}\n\nexport interface WXAddress\n{\n  userName: string;     // \"éå°é»\"\n  telNumber: string;    // \"18888888888\"\n  nationCode: string;   // \"310112\",\n  errMsg: string;       // \"openAddress:ok\",\n  postalCode: string;   // é®ç¼ \"201100\"\n  provinceName: string; // \"ä¸æµ·å¸\"\n  cityName: string;     // \"ä¸æµ·å¸\"\n  countryName: string;  // \"éµè¡åº\"\n  detailInfo: string;   // \"éµè¡åºæ¢ééé«ä¼åå¡ä¸­å¿\n}\n\nexport interface WXLocation\n{\n  latitude: number;\n  longitude: number;\n  errMsg: string;\n}\n\n\n","import {Injectable} from '@angular/core';\nimport {Events} from '@ionic/angular';\nimport {IonWechatModule} from '../ion-wechat.module';\nimport {Storage} from '@ionic/storage';\nimport {Wechat} from '../wechat';\nimport {Observable} from 'rxjs';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataService\n{\n  static KEY_USER = 'user';\n  private user: any;\n\n  constructor(public storage: Storage, public events: Events)\n  {\n    this.getUser().then(user => {\n      if (this.user) {\n        this.events.publish('user:ready', this.user);\n      }\n    }).catch();\n\n    if (Wechat.getUrlParam('clear')) {\n      storage.clear().then(res => location.replace(location.href.split('?')[0]));\n    }\n  }\n\n\n  setUser(user: any): Promise<any>\n  {\n    console.warn('set user');\n    this.user = user;\n    if (this.user) {\n      // *m/7d æææ\n      // this.user.expiresIn = Date.now() + (ENV.DEBUG ? 600000 : 86400000 * 30);\n      this.user.expiresIn = Date.now() + (IonWechatModule.ENV.debug ? 1000 : 86400000 * 7);\n      this.events.publish('user:ready', this.user);\n    }\n    return this.storage.set(DataService.KEY_USER, user);\n  }\n\n  getUser(): Promise<any>\n  {\n    if (this.user) {\n      return Promise.resolve(this.user);\n    } else {\n      return this.storage.get(DataService.KEY_USER)\n          .then(user => {\n            if (user && user.expiresIn < Date.now()) {\n              this.storage.remove(DataService.KEY_USER);\n              return null;\n            }\n            this.user = user;\n            return this.user;\n          });\n    }\n  }\n\n  getUserSync(): any\n  {\n    return this.user;\n  }\n\n  get(key: string): Promise<any>\n  {\n    return this.storage.get(key);\n  }\n\n  set(key: string, value: any): Promise<any>\n  {\n    return this.storage.set(key, value);\n  }\n\n  doOnUserReady(action: (user: any) => void, event: string = 'user:ready')\n  {\n    this.getUser().then(user => {\n      this.user = this.user || user;\n      if (this.user) {\n        action(this.user);\n        console.warn('user ready');\n      } else {\n        const handler = (res) => {\n          action(res);\n          this.events.unsubscribe(event, handler);\n        };\n        this.events.subscribe(event, handler);\n        console.warn('user no ready');\n      }\n    });\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {\n  ActionSheetController,\n  AlertController,\n  LoadingController,\n  ModalController,\n  PopoverController,\n  ToastController\n} from '@ionic/angular';\nimport {AnimationBuilder, Color, Mode, ToastButton, ToastOptions} from '@ionic/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UiService\n{\n  constructor(\n      public modal: ModalController,\n      public popover: PopoverController,\n      public actionSheet: ActionSheetController,\n      private loadingCtrl: LoadingController,\n      private alertCtrl: AlertController,\n      private toastCtrl: ToastController\n  )\n  { }\n\n//   showLoading(): Loading\n//   {\n//     const loading = this.loadingCtrl.create({\n//       spinner: 'hide',\n//       content: `\n//       <div>\n//         <div class=\"weui-mask_transparent\"></div>\n//         <div class=\"weui-toast\">\n//             <i class=\"weui-loading weui-icon_toast\"></i>\n//             <p class=\"weui-toast__content\">æ°æ®å è½½ä¸­</p>\n//         </div>\n//     </div>\n// `\n//     });\n//\n//     loading.then();\n//     return loading;\n//   }\n//\n  toastShort(message: string, position?: 'top' | 'bottom' | 'middle'): Promise<any>\n  {\n    return this.toast({message, position: position || 'top', duration: 2000});\n  }\n\n  toast(options: ToastOptions): Promise<any>\n  {\n    return this.toastCtrl.create(options).then(toast => {\n      toast.present();\n    });\n  }\n\n// alert(message: string, ok?: string, action?: () => void, title: string = 'æç¤º'): Promise<any>\n// {\n//   return this.alertCtrl.create({\n//     enableBackdropDismiss: false,\n//     title: title,\n//     message: message,\n//     buttons: [{\n//       text: ok || 'å¥½',\n//       handler: action\n//     }]\n//   }).present();\n// }\n\n\n// input(options: {\n//   title?: string,\n//   message?: string,\n//   ok?: string,\n//   placeholder?: string,\n//   type?: string,\n//   action?: (input: string) => void,\n// }): Promise<any>\n// {\n//   return this.alertCtrl.create({\n//     enableBackdropDismiss: false,\n//     title: options.title || 'æç¤º',\n//     message: options.message,\n//     inputs: [{\n//       name: 'input',\n//       placeholder: options.placeholder,\n//       type: options.type\n//     }],\n//     buttons: [{\n//       text: 'åæ¶'\n//     }, {\n//       text: options.ok || 'å¥½',\n//       handler: data => options.action && options.action(data.input)\n//     }]\n//   }).present();\n// }\n\n// prompt(message: string, ok?: string, cancel?: string, action?: () => void): Promise<any>\n// {\n//   return this.alertCtrl.create({\n//     title: 'æç¤º', message: message, buttons: [{\n//       text: cancel || 'åæ¶'\n//     }, {\n//       text: ok || 'å¥½',\n//       handler: action\n//     }]\n//   }).present();\n//\n// }\n\n}\n","import {Inject, InjectionToken, ModuleWithProviders, NgModule} from '@angular/core';\nimport {IonicStorageModule} from '@ionic/storage';\nimport {Photo} from './pipes/photo';\nimport {DataService} from './service/data.service';\nimport {Wechat} from './wechat';\nimport * as VConsole from 'vconsole';\nimport {UiService} from './service/ui.service';\nimport {Events, IonicModule} from '@ionic/angular';\n\nexport const CONFIG = new InjectionToken('IonWechatConfig');\n\nexport let UI;\nexport let DB: DataService;\nexport let IonEvent: Events;\n\n@NgModule({\n  declarations: [],\n  imports: [\n    IonicModule,\n    IonicStorageModule.forRoot(),\n  ]\n})\nexport class IonWechatModule\n{\n  static ENV = {debug: false};\n\n\n  constructor(@Inject(CONFIG) options: Options, ui: UiService, data: DataService, events: Events)\n  {\n    IonWechatModule.ENV.debug = options.debug || false;\n    Photo.BASE_URL = options.imgBaseUrl || '';\n    DataService.KEY_USER = options.userKey || 'user';\n\n    if (Wechat.getUrlParam('vConsole')) {\n      // @ts-ignore\n      const vConsole = new VConsole();\n    }\n\n    UI = ui;\n    IonEvent = events;\n    DB = data;\n  }\n\n\n  static forRoot(options: Options): ModuleWithProviders\n  {\n    return {\n      ngModule: IonWechatModule,\n      providers: [\n        {provide: CONFIG, useValue: options},\n      ]\n    };\n  }\n}\n\nexport interface Options\n{\n  debug?: boolean;\n  /**\n   * å­æ¾ç¨æ·ç key\n   */\n  userKey?: string;\n  imgBaseUrl: string;\n}\n"],"names":["tslib_1.__values"],"mappings":"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"}